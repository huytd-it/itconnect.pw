<div class="tw-h-4"></div>
<mat-tab-group #tabGroup (selectedIndexChange)="changeTab($event)">
  <mat-tab label="Tổng quan">
    <div class="tw-p-5" *ngIf="data">
      <div class="tw-text-medium tw-text-2xl tw-mt-5">
        {{data.name}}
      </div>
      <div
        class="tw-text-center tw-mt-5 tw-py-5 tw-border tw-rounded tw-bg-gray-100 tw-flex tw-items-center tw-justify-center"
        *ngIf="isEnded"
      >
        <mat-icon>error</mat-icon>
        <span class="tw-ml-3">
          Hồ sơ việc làm này đã kết thúc
        </span>
      </div>
      <div class="tw-flex tw-gap-3 tw-mt-10">
        <button mat-stroked-button [routerLink]="'/u/jobs/view/' + data.id">
          <mat-icon>visibility</mat-icon>
           Xem
        </button>
        <button
          mat-stroked-button
          *ngIf="data.status === JobStatus.Draft"
          [routerLink]="'/u/jobs/edit/'+ data.id"
        >
          <mat-icon>edit</mat-icon>
          Chỉnh sửa
        </button>
        <button mat-stroked-button color="primary" *ngIf="data.status === JobStatus.Draft" (click)="publish()">
          <mat-icon>publish</mat-icon>
          Công khai
        </button>
        <button mat-stroked-button color="warn" (click)="delete()">
          <mat-icon>delete_outline</mat-icon>
          Xóa
        </button>
        <button mat-stroked-button color="warn" *ngIf="data.status === JobStatus.Publish && !isEnded" (click)="stop()">
          <mat-icon>done</mat-icon>
          Kết thúc nhận hồ sơ
        </button>
      </div>

      <app-easy-card
        class="tw-mt-10"
        [label]="'Trạng thái'"
        [icon]="'info'"
      >
        <div class="tw-flex tw-flex-wrap tw-gap-3 tw-justify-around">
          <div>Thành viên ứng tuyển: {{data.jobApplyCount}}</div>
          <div>Lượt xem: {{data.jobViewLogCount}}</div>
          <div>Trạng thái: {{getStatusText(data.status)}}</div>
          <div>Ngày kết thúc: <b>{{data.endDate | date: 'dd/MM/yyyy'}}</b></div>
        </div>
      </app-easy-card>

      <app-easy-card
        class="tw-mt-10"
        [label]="'Thống kê'"
        [icon]="'monitoring'"
      >
        <app-chart [jobId]="data.id"></app-chart>
      </app-easy-card>

    </div>
  </mat-tab>
  <mat-tab label="Ứng viên"></mat-tab>
  <mat-tab label="Gợi ý"></mat-tab>
</mat-tab-group>
<router-outlet></router-outlet>
