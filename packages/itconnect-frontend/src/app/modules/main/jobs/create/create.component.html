<div class="tw-shadow-sm tw-p-5" *ngIf="!idShow">
  <h2 class="!tw-mb-0">Tạo Việc Làm</h2>
</div>
<form class="tw-p-5" [formGroup]="form">
  <div class="tw-flex tw-flex-wrap tw-gap-10">
    <div class="tw-border tw-rounded tw-text-left tw-basis-[100%] lg:tw-basis-[47%] tw-max-w-[500px]  tw-relative">
      <div class="tw-px-3 tw-py-2 tw-border-r tw-border-b tw-font-medium tw-rounded-br tw-inline-block tw-shadow-sm">
        <div class="tw-flex tw-items-center">
          <mat-icon>groups</mat-icon>
          <span class="tw-ml-2">Vị trí</span>
        </div>
      </div>
      <div class="tw-p-3">
        <app-input-skill-level-range
          [items]="form.controls[FormField.positions].value || []"
          [loadMoreFn]="fetchDataPosition"
          [createTagFn]="fnAddUserTaggedPosition"
          [isAddTag]="false"
          [max]="1"
          [readOnly]="!!idShow"
          (onRemove)="onRemoveDataPosition($event)"
          (onAdd)="onAddDataPosition($event)"
          (onChange)="onChangeDataPosition($event)"
        ></app-input-skill-level-range>
      </div>
      <div class="tw-h-[70px]"></div>
      <div class="tw-absolute tw-w-full tw-bottom-0">
        <div class="tw-px-2 tw-text-[12px] tw-inline-block tw-border-t tw-border-r">Hệ số</div>
        <div class="tw-px-2 tw-pb-2 tw-border-t tw-text-center tw-pt-6">
          <ngx-slider
            [formControlName]="FormField.pointPosition"
            [options]="options"
          ></ngx-slider>
        </div>
      </div>
    </div>

    <div class="tw-border tw-rounded tw-text-left tw-basis-[100%] lg:tw-basis-[47%] tw-max-w-[500px] tw-relative">
      <div class="tw-px-3 tw-py-2 tw-border-r tw-border-b tw-font-medium tw-rounded-br tw-inline-block tw-shadow-sm">
        <div class="tw-flex tw-items-center">
          <mat-icon>hub</mat-icon>
          <span class="tw-ml-2">Kỹ năng</span>
        </div>
      </div>
      <div class="tw-p-3">
        <app-input-skill-level-range
          [items]="form.controls[FormField.skills].value || []"
          [loadMoreFn]="fetchDataSkill"
          [createTagFn]="fnAddUserTaggedSkill"
          [isAddTag]="false"
          [readOnly]="!!idShow"
          (onRemove)="onRemoveDataSkill($event)"
          (onAdd)="onAddDataSkill($event)"
          (onChange)="onChangeDataSkill($event)"
        ></app-input-skill-level-range>
      </div>
      <div class="tw-h-[70px]"></div>
      <div class="tw-absolute tw-w-full tw-bottom-0">
        <div class="tw-px-2 tw-text-[12px] tw-inline-block tw-border-t tw-border-r">Hệ số</div>
        <div class="tw-px-2 tw-pb-2 tw-border-t tw-text-center tw-pt-6">
          <ngx-slider
            [formControlName]="FormField.pointSkill"
            [options]="options"
          ></ngx-slider>
        </div>
      </div>
    </div>

    <div class="tw-border tw-rounded tw-text-left tw-basis-[100%] lg:tw-basis-[47%] tw-max-w-[500px] tw-relative">
      <div class="tw-px-3 tw-py-2 tw-border-r tw-border-b tw-font-medium tw-rounded-br tw-inline-block tw-shadow-sm">
        <div class="tw-flex tw-items-center">
          <mat-icon>card_membership</mat-icon>
          <span class="tw-ml-2">Văn bằng / Chứng chỉ</span>
        </div>
      </div>
      <div class="tw-p-3">
        <app-input-skill-level-range
          [items]="form.controls[FormField.certificate].value || []"
          [loadMoreFn]="fetchDataCertificate"
          [createTagFn]="fnAddUserTaggedCertificate"
          [isAddTag]="false"
          [readOnly]="!!idShow"
          (onRemove)="onRemoveDataCertificate($event)"
          (onAdd)="onAddDataCertificate($event)"
          (onChange)="onChangeDataCertificate($event)"
        ></app-input-skill-level-range>
      </div>
      <div class="tw-h-[70px]"></div>
      <div class="tw-absolute tw-w-full tw-bottom-0">
        <div class="tw-px-2 tw-text-[12px] tw-inline-block tw-border-t tw-border-r">Hệ số</div>
        <div class="tw-px-2 tw-pb-2 tw-border-t tw-text-center tw-pt-6">
          <ngx-slider
            [formControlName]="FormField.pointCertificate"
            [options]="options"
          ></ngx-slider>
        </div>
      </div>
    </div>

    <div class="tw-border tw-rounded tw-text-left tw-basis-[100%] lg:tw-basis-[47%] tw-max-w-[500px] tw-relative">
      <div class="tw-px-3 tw-py-2 tw-border-r tw-border-b tw-font-medium tw-rounded-br tw-inline-block tw-shadow-sm">
        <div class="tw-flex tw-items-center">
          <mat-icon>school</mat-icon>
          <span class="tw-ml-2">Học vấn</span>
        </div>
      </div>
      <div class="tw-p-3">
        <app-input-skill
          [items]="form.controls[FormField.school].value || []"
          [loadMoreFn]="fetchDataSchool"
          [createTagFn]="fnAddUserTaggedSchool"
          [hasAddTag]="false"
          [readOnly]="!!idShow"
          (onRemove)="onRemoveDataSchool($event)"
          (onAdd)="onAddDataSchool($event)"
        ></app-input-skill>
      </div>
      <div class="tw-h-[70px]"></div>
      <div class="tw-absolute tw-w-full tw-bottom-0">
        <div class="tw-px-2 tw-text-[12px] tw-inline-block tw-border-t tw-border-r">Hệ số</div>
        <div class="tw-px-2 tw-pb-2 tw-border-t tw-text-center tw-pt-6">
          <ngx-slider
            [formControlName]="FormField.pointSchool"
            [options]="options"
          ></ngx-slider>
        </div>
      </div>
    </div>

    <div class="tw-border tw-rounded tw-text-left tw-basis-[100%] lg:tw-basis-[47%] tw-max-w-[500px] tw-relative">
      <div class="tw-px-3 tw-py-2 tw-border-r tw-border-b tw-font-medium tw-rounded-br tw-inline-block tw-shadow-sm">
        <div class="tw-flex tw-items-center">
          <mat-icon>hail</mat-icon>
          <span class="tw-ml-2">Hình thức làm việc</span>
        </div>
      </div>
      <div class="tw-p-3">
        <app-input-skill
          [items]="form.controls[FormField.workFrom].value || []"
          [loadMoreFn]="fetchDataWorkFrom"
          [hasAddTag]="false"
          [readOnly]="!!idShow"
          (onAdd)="onAddDataWorkFrom($event)"
          (onRemove)="onRemoveDataWorkFrom($event)"
        ></app-input-skill>
      </div>
      <div class="tw-h-[70px]"></div>
      <div class="tw-absolute tw-w-full tw-bottom-0">
        <div class="tw-px-2 tw-text-[12px] tw-inline-block tw-border-t tw-border-r">Hệ số</div>
        <div class="tw-px-2 tw-pb-2 tw-border-t tw-text-center tw-pt-6">
          <ngx-slider
            [formControlName]="FormField.pointWorkFrom"
            [options]="options"
          ></ngx-slider>
        </div>
      </div>
    </div>


    <div class="tw-border tw-rounded tw-text-left tw-basis-[100%] lg:tw-basis-[47%] tw-max-w-[500px] tw-relative">
      <div class="tw-px-3 tw-py-2 tw-border-r tw-border-b tw-font-medium tw-rounded-br tw-inline-block tw-shadow-sm">
        <div class="tw-flex tw-items-center">
          <mat-icon>psychology_alt</mat-icon>
          <span class="tw-ml-2">Cấp độ nghề nghiệp</span>
        </div>
      </div>
      <div class="tw-p-3">
        <app-input-skill
          [items]="form.controls[FormField.jobLevel].value || []"
          [loadMoreFn]="fetchDataJobLevel"
          [hasAddTag]="false"
          [readOnly]="!!idShow"
          (onAdd)="onAddDataJobLevel($event)"
          (onRemove)="onRemoveDataJobLevel($event)"
        ></app-input-skill>
      </div>
      <div class="tw-h-[70px]"></div>
      <div class="tw-absolute tw-w-full tw-bottom-0">
        <div class="tw-px-2 tw-text-[12px] tw-inline-block tw-border-t tw-border-r">Hệ số</div>
        <div class="tw-px-2 tw-pb-2 tw-border-t tw-text-center tw-pt-6">
          <ngx-slider
            [formControlName]="FormField.pointLevelJob"
            [options]="options"
          ></ngx-slider>
        </div>
      </div>
    </div>


    <div class="tw-border tw-rounded tw-text-left tw-basis-[100%] lg:tw-basis-[47%] tw-max-w-[500px] tw-relative">
      <div class="tw-px-3 tw-py-2 tw-border-r tw-border-b tw-font-medium tw-rounded-br tw-inline-block tw-shadow-sm">
        <div class="tw-flex tw-items-center">
          <mat-icon>difference</mat-icon>
          <span class="tw-ml-2">Năm kinh nghiệm</span>
        </div>
      </div>
      <div class="tw-p-3">
        <ng-select
          #ngSelect
          appearance="outline"
          bindLabel="name"
          placeholder="Năm kinh nghiệm"
          [items]="yoeList"
          [formControlName]="FormField.yoe"
        ></ng-select>
      </div>
      <div class="tw-h-[70px]"></div>
      <div class="tw-absolute tw-w-full tw-bottom-0">
        <div class="tw-px-2 tw-text-[12px] tw-inline-block tw-border-t tw-border-r">Hệ số</div>
        <div class="tw-px-2 tw-pb-2 tw-border-t tw-text-center tw-pt-6">
          <ngx-slider
            [formControlName]="FormField.pointYoe"
            [options]="options"
          ></ngx-slider>
        </div>
      </div>
    </div>

    <div class="tw-border tw-rounded tw-text-left tw-basis-[100%] lg:tw-basis-[47%] tw-max-w-[500px] tw-relative">
      <div class="tw-px-3 tw-py-2 tw-border-r tw-border-b tw-font-medium tw-rounded-br tw-inline-block tw-shadow-sm">
        <div class="tw-flex tw-items-center">
          <mat-icon>difference</mat-icon>
          <span class="tw-ml-2">Loại công việc</span>
        </div>
      </div>
      <div class="tw-p-3">
        <app-easy-select
          #selectCompany
          [label]="'Loại công việc'"
          [loadMoreFn]="fetchDataJobType"
          [formControlName]="FormField.jobType"
          [isAddTag]="false"
        ></app-easy-select>
      </div>
      <div class="tw-h-[70px]"></div>
      <div class="tw-absolute tw-w-full tw-bottom-0">
        <div class="tw-px-2 tw-text-[12px] tw-inline-block tw-border-t tw-border-r">Hệ số</div>
        <div class="tw-px-2 tw-pb-2 tw-border-t tw-text-center tw-pt-6">
          <ngx-slider
            [formControlName]="FormField.pointLevelType"
            [options]="options"
          ></ngx-slider>
        </div>
      </div>
    </div>

  </div>


  <div class="tw-flex-wrap tw-gap-3 tw-flex tw-items-start tw-mt-[40px] ">
    <mat-form-field appearance="outline" class="tw-flex-1">
      <mat-label>Tên công việc</mat-label>
      <input matInput type="text" [formControlName]="FormField.name">
      <mat-error *ngIf="isControlError(FormField.name, 'required')">
        Tên công việc là bắt buộc
      </mat-error>
      <mat-error *ngIf="isControlError(FormField.name, 'minlength', 'maxlength')">
        Tên công việc có độ dài từ 1 đên 255
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="tw-mb-3">
      <mat-label>Ngày kết thúc nhận hồ sơ</mat-label>
      <input matInput [matDatepicker]="picker" [formControlName]="FormField.dateEnd" min="{{minDate | date:'yyyy-MM-dd'}}">
      <mat-hint>DD/MM/YYYY</mat-hint>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="isControlError(FormField.dateEnd, 'required')">
        Ngày kết thúc nhận hồ sơ là bắt buộc
      </mat-error>
    </mat-form-field>
  </div>

  <div class="tw-text-left">
    <div class="tw-flex tw-flex-wrap tw-gap-3 tw-max-w-[500px]">
      <div class="tw-flex-1">
        <mat-form-field appearance="outline" class="tw-ml-1 tw-w-full">
          <mat-label>Lương (từ)</mat-label>
          <input matInput appNumberOnly [formControlName]="FormField.salaryFrom">
          <mat-hint>{{ form.value[FormField.salaryFrom] | currency: 'VND' }}</mat-hint>
          <mat-error *ngIf="isControlError(FormField.salaryFrom, 'min')">
            Lương không thể nhỏ hơn 0
          </mat-error>
        </mat-form-field>
      </div>
      <span class="tw-mt-[-16px] md:tw-mt-5 tw-w-full md:tw-w-auto tw-flex tw-items-center tw-justify-center md:tw-inline-block">
        <fa-icon [icon]="faArrowRight" class="tw-hidden md:tw-inline-block"></fa-icon>
        <fa-icon [icon]="faArrowDown" class="tw-inline-block md:tw-hidden"></fa-icon>
      </span>
      <div class="tw-flex-1">
        <mat-form-field appearance="outline" class="tw-ml-1 tw-w-full">
          <mat-label>Lương (đến)</mat-label>
          <input matInput appNumberOnly [formControlName]="FormField.salaryTo">
          <mat-hint>{{ form.value[FormField.salaryTo] | currency: 'VND' }}</mat-hint>
          <mat-error *ngIf="isControlError(FormField.salaryTo, 'minSalary')">
            Lương không hợp lệ
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div>
      <mat-form-field appearance="outline" class="tw-ml-1 tw-w-[100px]">
        <mat-label>Số lượng</mat-label>
        <input matInput appNumberOnly [formControlName]="FormField.size">
        <mat-error *ngIf="isControlError(FormField.salaryFrom, 'min', 'max')">
          Số lượng từ 1 đến 100
        </mat-error>
      </mat-form-field>
    </div>

    <div class="tw-text-left tw-mt-10">
      <div class="tw-mb-2 tw-m1-1">
        Giới thiệu công việc
      </div>
      <app-editor-c1 [form]="form" [name]="FormField.Description"></app-editor-c1>
    </div>
    <div class="tw-text-left tw-text-[10px] tw-ml-3">
      <mat-error *ngIf="isControlError(FormField.Description, 'required')">
        Giới thiệu công việc là bắt buộc
      </mat-error>
    </div>

    <div class="tw-text-left tw-mt-10">
      <div class="tw-mb-2 tw-ml-1">
        Yêu cầu & kinh nghiệm
      </div>
      <app-editor-c1 [form]="form" [name]="FormField.SkillExperience"></app-editor-c1>
    </div>
    <div class="tw-text-left tw-text-[10px] tw-ml-3">
      <mat-error *ngIf="isControlError(FormField.SkillExperience, 'required')">
        Yêu cầu & kinh nghiệm là bắt buộc
      </mat-error>
    </div>

    <div class="tw-text-left tw-mt-10">
      <div class="tw-mb-2 tw-ml-1">
        Lý do chọn chúng tôi
      </div>
      <app-editor-c1 [form]="form" [name]="FormField.Reason"></app-editor-c1>
    </div>

    <div class="tw-mt-[50px] tw-flex tw-justify-center tw-pb-6" *ngIf="!idShow">
      <button
        mat-button
        class="!tw-mr-2"
        type="button"
        (click)="onReset()"
      >
        Reset
      </button>
      <button
        mat-stroked-button
        class="!tw-mr-2"
        type="button"
        [disabled]="isSubmitting | async"
        (click)="onSaveDraft()"
      >
        Lưu nháp
      </button>
      <button
        mat-stroked-button
        color="primary"
        type="button"
        [disabled]="isSubmitting | async"
        (click)="onSubmit()"
      >
        Đăng
      </button>
    </div>

  </div>
</form>
