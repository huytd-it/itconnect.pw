<app-head-filter>
  <div class="tw-flex tw-w-full">
    <app-basic-filter (onSearch)="onSearch()"></app-basic-filter>
    <div class="tw-border-l tw-flex tw-items-center">
      <button
        mat-button
        color="primary"
        class="!tw-ml-2 tw-flex tw-items-center"
        (click)="expandFilter = !expandFilter"
      >
        <span class="tw-mx-1 tw-whitespace-nowrap tw-text-[11px] sm:tw-text-[14px]">Nâng cao</span>
        <mat-icon>more_horiz</mat-icon>
      </button>
    </div>
  </div>
</app-head-filter>

<div class="tw-flex tw-justify-center tw-relative">
  <div
    class="tw-w-full tw-h-full tw-absolute tw-z-10 tw-bg-[#ccc] tw-bg-opacity-40"
    *ngIf="expandFilter"
    (click)="expandFilter = false"
  ></div>
  <div
    class="tw-absolute tw-right-0 tw-bg-white tw-w-full md:tw-w-[600px] tw-h-full tw-shadow-xl tw-border-t tw-z-20"
    *ngIf="expandFilter"
  >
    <app-full-filter (onSearch)="onSearch(); expandFilter = false"></app-full-filter>
  </div>
  <div class="tw-mx-3 tw-border-t tw-w-full tw-max-w-[1400px] tw-h-[calc(100vh-124px)] tw-bg-white tw-flex tw-gap-3">
    <div
      #containerList
      class="
        tw-w-full md:tw-min-w-[400px] md:tw-w-[40%] tw-border-l tw-border-r tw-h-full
        tw-overflow-y-auto tw-overflow-x-hidden c-scrollbar
      "
    >
      <ng-container *ngIf="data">
        <div class="tw-p-3 tw-text-[11px] tw-text-right tw-shadow-sm tw-text-[#888]">
          {{data.meta.itemCount}} việc làm thông qua tìm kiếm
        </div>
        <ng-container *ngFor="let item of data.data || []">
          <div
            class="tw-p-3 tw-border-b tw-cursor-pointer tw-flex tw-gap-4 hover:tw-bg-[#f6f4f9]"
            [routerLink]="item.id.toString()"
            [routerLinkActive]="'tw-bg-[#E2F0FE]'"
          >
            <div class="tw-w-[90px] tw-min-w-[90px]">
              <img src="/assets/images/company-default.png">
            </div>
            <div class="tw-pt-1 tw-flex-auto">
              <a
                [routerLink]="item.id.toString()"
                class="tw-text-lg tw-text-primaryColor line-2"
              >
                {{item.name}}
              </a>
              <div class="tw-text-[13px]">
                {{item.companyTag.name}}
              </div>
              <div class="tw-text-[13px] tw-mt-1 tw-font-thin">
                {{item.addressStreet}}, {{item.addressVillage.name}}, {{item.addressDistrict.name}}, {{item.addressProvince.name}}
              </div>
              <div class="tw-text-[12px] tw-mt-2 tw-font-thin">
                {{item.updatedAt | dateFromNow}}
              </div>
            </div>
          </div>
        </ng-container>
        <div class="tw-flex tw-justify-center tw-p-4">
          <mat-paginator
            [disabled]="appService.headLoading$ | async"
            [length]="data.meta.itemCount"
            [pageSize]="data.meta.take"
            [pageSizeOptions]="[5, 10, 25]"
            (page)="onChangePage($event)"
          ></mat-paginator>
        </div>
      </ng-container>
    </div>
    <div class="tw-flex-1 tw-hidden md:tw-block">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>

